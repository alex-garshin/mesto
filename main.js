(()=>{"use strict";var t={d:(e,r)=>{for(var n in r)t.o(r,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:r[n]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),p:""};function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}function r(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,o(n.key),n)}}function n(t,e,r){return(e=o(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function o(t){var r=function(t,r){if("object"!==e(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!==e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===e(r)?r:String(r)}t.d({},{l:()=>ht});var i=function(){function t(e,r,o,i){var u=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),n(this,"deleteImage",(function(t){t.remove(),t=null})),n(this,"changeLikesCounter",(function(t){u._galleryLike.classList.toggle("gallery__like_active"),u._galleryLikesCounter.textContent=t.length})),n(this,"addLike",(function(){u._isLike=!0})),n(this,"removeLike",(function(){u._isLike=!1})),this._name=e.name,this._link=e.link,this._id=e.id,this._likes=e.likes,this._owner=e.owner,this._profileId=e.profileId,this._isLike=this._likes.find((function(t){return t._id===u._profileId})),this._isOwner=this._owner._id===this._profileId,this._galleryCard=document.querySelector(r).content.querySelector(".gallery__card"),this._handleCardClick=o,this._handleChangeLikes=i}var e,o;return e=t,(o=[{key:"generateCard",value:function(){var t;return this._galleryCard=this._getCardTemplate(this._galleryCard),this._galleryImg=this._galleryCard.querySelector(".gallery__pic"),this._galleryLikesCounter=this._galleryCard.querySelector(".gallery__like-counter"),this._galleryImg.setAttribute("alt",this._name),this._galleryImg.setAttribute("src",this._link),this._galleryLikesCounter.textContent=null===(t=this._likes)||void 0===t?void 0:t.length,this._galleryName=this._galleryCard.querySelector(".gallery__text"),this._galleryName.textContent=this._name,this._galleryDelete=this._galleryCard.querySelector(".gallery__delete"),this._isOwner&&this._galleryDelete.classList.remove("gallery__delete_disable"),this._galleryLike=this._galleryCard.querySelector(".gallery__like"),this._isLike&&this._galleryLike.classList.add("gallery__like_active"),this._addEventListeners(),this._galleryCard}},{key:"_getCardTemplate",value:function(t){return t.cloneNode(!0)}},{key:"_addEventListeners",value:function(){var t=this;this._galleryImg.addEventListener("click",(function(){t._handleCardClick(t._name,t._link)})),this._galleryDelete.addEventListener("click",(function(){return ht(t,t._id)})),this._galleryLike.addEventListener("click",(function(){return t._handleChangeLikes({type:t._isLike?"liked":"disLiked",card:t})}))}}])&&r(e.prototype,o),Object.defineProperty(e,"prototype",{writable:!1}),t}();function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,s(n.key),n)}}function c(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function l(t,e,r){return(e=s(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function s(t){var e=function(t,e){if("object"!==u(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===u(e)?e:String(e)}var f=c((function t(e,r){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),l(this,"_hasInvalidInput",(function(){return Array.from(n._inputList).some((function(t){return!t.validity.valid}))})),l(this,"toggleButtonState",(function(){n._hasInvalidInput()?(n._buttonElement.classList.add(n._obj.popupButtonBlocked),n._buttonElement.setAttribute("disabled",!0)):(n._buttonElement.classList.remove(n._obj.popupButtonBlocked),n._buttonElement.removeAttribute("disabled"))})),l(this,"_setEventListener",(function(){n._inputList=Array.from(n._formElement.querySelectorAll(n._obj.popupInputValidate)),n._buttonElement=n._formElement.querySelector(n._obj.popupButtonValidate),n.toggleButtonState(),n._inputList.forEach((function(t){t.addEventListener("input",(function(){n._checkInputValidity(t),n.toggleButtonState()}))}))})),l(this,"_showInputError",(function(t,e){t.classList.add(n._obj.popupInputError),n._errorElement.textContent=e,n._errorElement.classList.add(n._obj.popupError)})),l(this,"_hideInputError",(function(t){t.classList.remove(n._obj.popupInputError),n._errorElement.classList.remove(n._obj.popupError),n._errorElement.textContent=""})),l(this,"_checkInputValidity",(function(t){n._errorElement=n._formElement.querySelector(".".concat(t.id,"-error")),t.validity.valid?n._hideInputError(t):n._showInputError(t,t.validationMessage)})),l(this,"enableValidation",(function(){n._setEventListener()})),this._obj=e,this._formElement=r}));function p(t){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p(t)}function y(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==p(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===p(o)?o:String(o)),n)}var o}var d=function(){function t(e,r){var n=e.items,o=e.renderer;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._initialArray=n,this._renderer=o,this._container=document.querySelector(r),this._selector=r}var e,r;return e=t,(r=[{key:"addItem",value:function(t){this._container.prepend(t)}},{key:"addItemAppend",value:function(t){this._container.append(t)}},{key:"getItems",value:function(){return this._initialArray}},{key:"renderItems",value:function(){var t=this;this._initialArray.forEach((function(e){t._renderer(e)}))}}])&&y(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function b(t){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},b(t)}function h(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==b(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==b(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===b(o)?o:String(o)),n)}var o}var _=function(){function t(e){var r=e.name,n=e.job,o=e.avatar,i=e.id;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._name=document.querySelector(r),this._job=document.querySelector(n),this._avatar=document.querySelector(o),this._id=i}var e,r;return e=t,(r=[{key:"getUserId",value:function(){return this._id}},{key:"getUserInfo",value:function(){return{name:this._name.textContent,job:this._job.textContent,avatar:this._avatar.getAttribute("src")}}},{key:"setUserInfo",value:function(t){var e=t.name,r=t.job,n=t.avatar;this._name.textContent=e,this._job.textContent=r,this._avatar.setAttribute("src",n)}},{key:"editAvatar",value:function(t){document.querySelector(".profile__avatar").setAttribute("src",t)}}])&&h(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function m(t){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m(t)}function v(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==m(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==m(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===m(o)?o:String(o)),n)}var o}var g=function(){function t(e){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._popupType=document.querySelector(e),this._closeBtn=this._popupType.querySelector(".popup__close"),this._processClickUpd=function(t){r._processClick(t)},this._processEscapeUpd=function(t){r._processEscape(t)},this._processCloseUpd=function(){r.close()}}var e,r;return e=t,(r=[{key:"open",value:function(){this._popupType.classList.add("popup_opened"),this.setEventListeners()}},{key:"close",value:function(){this._popupType.classList.remove("popup_opened"),document.removeEventListener("keydown",this._processEscapeUpd),this._popupType.removeEventListener("click",this._processClickUpd),this._closeBtn.removeEventListener("click",this._processCloseUpd)}},{key:"getPopupType",value:function(){return this._popupType}},{key:"setEventListeners",value:function(){document.addEventListener("keydown",this._processEscapeUpd),this._popupType.addEventListener("click",this._processClickUpd),this._closeBtn.addEventListener("click",this._processCloseUpd)}},{key:"_processEscape",value:function(t){"Escape"===t.key&&this.close()}},{key:"_processClick",value:function(t){t.target===t.currentTarget&&this.close()}}])&&v(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function k(t){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},k(t)}function S(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,C(n.key),n)}}function w(t,e){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},w(t,e)}function j(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function E(){return E="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=O(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},E.apply(this,arguments)}function O(t){return O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},O(t)}function P(t,e,r){return(e=C(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function C(t){var e=function(t,e){if("object"!==k(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==k(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===k(e)?e:String(e)}var L=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&w(t,e)}(u,t);var e,r,n,o,i=(n=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=O(n);if(o){var r=O(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===k(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return j(t)}(this,t)});function u(t,e){var r,n,o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),P(j(o=i.call(this,t)),"setEventListeners",(function(){E((r=j(o),O(u.prototype)),"setEventListeners",r).call(r),o._form.addEventListener("submit",o._processSubmit)})),P(j(o),"close",(function(){E((n=j(o),O(u.prototype)),"close",n).call(n),o._form.removeEventListener("submit",o._processSubmit),o._form.reset()})),o._form=o._popupType.querySelector(".popup__form"),o._inputList=Array.from(o._form.querySelectorAll(".popup__input")),o._submitButton=o._form.querySelector(".popup__button"),o._submitButtonText=o._submitButton.textContent,o._processSubmit=function(t){t.preventDefault(),e(o._getInputValues()).then((function(){o.close()}))},o}return e=u,(r=[{key:"_getInputValues",value:function(){var t=this;return this._formValues={},this._inputList.forEach((function(e){t._formValues[e.name]=e.value})),this._formValues}},{key:"isLoading",value:function(t){this._submitButton.textContent=t||this._submitButtonText}}])&&S(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),u}(g);function T(t){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},T(t)}function I(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==T(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==T(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===T(o)?o:String(o)),n)}var o}function q(){return q="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=B(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},q.apply(this,arguments)}function A(t,e){return A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},A(t,e)}function B(t){return B=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},B(t)}var U=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&A(t,e)}(u,t);var e,r,n,o,i=(n=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=B(n);if(o){var r=B(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===T(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(e=i.call(this,t))._popupImg=e._popupType.querySelector(".popup__img"),e._popupText=e._popupType.querySelector(".popup__text"),e}return e=u,(r=[{key:"open",value:function(t,e){this._popupImg.setAttribute("alt",t),this._popupImg.setAttribute("src",e),this._popupText.textContent=t,q(B(u.prototype),"open",this).call(this)}}])&&I(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),u}(g);function R(t){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},R(t)}function x(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==R(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==R(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===R(o)?o:String(o)),n)}var o}function D(){return D="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=z(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},D.apply(this,arguments)}function V(t,e){return V=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},V(t,e)}function z(t){return z=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},z(t)}var N=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&V(t,e)}(u,t);var e,r,n,o,i=(n=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=z(n);if(o){var r=z(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===R(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(r=i.call(this,t,e))._processSubmit=function(t){t.preventDefault(),e(r._card,r._cardId)},r}return e=u,(r=[{key:"open",value:function(t,e){this._card=t,this._cardId=e,D(z(u.prototype),"open",this).call(this)}},{key:"close",value:function(){D(z(u.prototype),"close",this).call(this),this._card=null}}])&&x(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),u}(L);function F(t){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},F(t)}function J(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==F(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==F(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===F(o)?o:String(o)),n)}var o}var G=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._baseUrl=e.baseUrl,this._token=e.headers.authorization,this._contentType=e.headers["Content-Type"]}var e,r;return e=t,(r=[{key:"_getCheck",value:function(t){return t.ok?t.json():Promise.reject("ошибка : ".concat(t.status))}},{key:"getInitialCards",value:function(){var t=this;return fetch(this._baseUrl+"/cards",{method:"GET",headers:{authorization:this._token}}).then((function(e){return t._getCheck(e,"массив картинок")}))}},{key:"getUserInfo",value:function(){var t=this;return fetch(this._baseUrl+"/users/me",{method:"GET",headers:{authorization:this._token}}).then((function(e){return t._getCheck(e,"информация о пользователе")}))}},{key:"editProfile",value:function(t){var e=this,r=t.name,n=t.about;return fetch(this._baseUrl+"/users/me",{method:"PATCH",headers:{authorization:this._token,"Content-Type":this._contentType},body:JSON.stringify({name:r,about:n})}).then((function(t){return e._getCheck(t,"изменить профиль")}))}},{key:"editAvatar",value:function(t){var e=this,r=t.avatar;return fetch(this._baseUrl+"/users/me/avatar",{method:"PATCH",headers:{authorization:this._token,"Content-Type":this._contentType},body:JSON.stringify({avatar:r})}).then((function(t){return e._getCheck(t,"изменеть аватар")}))}},{key:"addNewCard",value:function(t){var e=this,r=t.name,n=t.link;return fetch(this._baseUrl+"/cards",{method:"POST",headers:{authorization:this._token,"Content-Type":this._contentType},body:JSON.stringify({name:r,link:n})}).then((function(t){return e._getCheck(t,"добавить изображение")}))}},{key:"likeCard",value:function(t){var e=this;return fetch(this._baseUrl+"/cards/"+t+"/likes",{method:"PUT",headers:{authorization:this._token}}).then((function(t){return e._getCheck(t,"поставить лайк")}))}},{key:"deleteCard",value:function(t){var e=this;return fetch(this._baseUrl+"/cards/"+t,{method:"DELETE",headers:{authorization:this._token}}).then((function(t){return e._getCheck(t,"удалить изображение")}))}},{key:"deleteLikeCard",value:function(t){var e=this;return fetch(this._baseUrl+"/cards/"+t+"/likes",{method:"DELETE",headers:{authorization:this._token}}).then((function(t){return e._getCheck(t,"снять лайк")}))}}])&&J(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();const H=t.p+"320dfc5ade8cc5428845.png",M=t.p+"1317f38edcb386d59936.png";var K,Q,W=document.querySelector(".popup__input_click_name"),X=document.querySelector(".popup__input_click_job"),Y=document.querySelector(".profile__edit-button"),Z=(document.querySelector(".popup__input_card_name"),document.querySelector(".popup__input_card_link"),document.querySelector(".profile__add-button")),$=document.querySelector(".popup__form_add"),tt=document.querySelector(".popup__form_edit"),et=document.querySelector(".popup__form_edit-avatar"),rt=document.querySelector(".profile__avatar-container"),nt={popupInputValidate:".popup__input",popupButtonValidate:".popup__button",popupInputError:"popup__input_click_error",popupButtonBlocked:"popup__button_blocked",popupError:"popup__error_visible"},ot=new G({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-62",headers:{authorization:"78542652-31c8-4469-a72b-b4b9aeed68be","Content-Type":"application/json"}});function it(t){return it="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},it(t)}function ut(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function at(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ut(Object(r),!0).forEach((function(e){ct(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ut(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function ct(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==it(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==it(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===it(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}document.getElementsByClassName("header__logo")[0].setAttribute("src",M),document.getElementsByClassName("profile__avatar")[0].setAttribute("src",H);var lt=new _({name:".profile__name",job:".profile__job",avatar:".profile__avatar"});ot.getUserInfo().then((function(t){return K=t._id,ot.getInitialCards().then((function(t){!function(t){(Q=new d({items:t.map((function(t){return{name:t.name,link:t.link,id:t._id,likes:t.likes,owner:t.owner,isOwner:t.owner._id===K}})),renderer:function(t){var e=St(at({profileId:K},t));Q.addItemAppend(e)}},".gallery")).renderItems()}(t)})).catch((function(t){console.log(t)})),lt.setUserInfo({name:t.name,job:t.about,avatar:t.avatar}),t})).catch((function(t){throw new Error("Ошибка получения данных пользователя")})).catch((function(t){console.log(t)}));var st=new L(".popup_click_prof",(function(t){return st.isLoading("Сохранение..."),ot.editProfile({name:t[W.name],about:t[X.name]}).then((function(t){var e=lt.getUserInfo();lt.setUserInfo({name:t.name,job:t.about,avatar:e.avatar})})).catch((function(t){console.log(t)})).finally((function(){st.isLoading()}))})),ft=new L(".popup_click_card",(function(t){return ft.isLoading("Сохранение..."),ot.addNewCard({name:t.name,link:t["img-link"]}).then((function(t){var e;null===(e=Q)||void 0===e||e.addItem(St(at({id:t._id,profileId:K},t)))})).catch((function(t){console.log(t)})).finally((function(){ft.isLoading()}))})),pt=new U(".popup_click_img"),yt=new N(".popup_click_delete",(function(t,e){ot.deleteCard(e).then((function(){t.deleteImage(t._galleryCard),yt.close()})).catch((function(t){throw new Error(t)}))})),dt=new L(".popup_click_avatar",(function(t){return dt.isLoading("Сохранение..."),ot.editAvatar({avatar:null==t?void 0:t["avatar-link"]}).then((function(t){lt.editAvatar(t.avatar)})).catch((function(t){console.log(t),dt.isLoading()})).finally((function(){dt.isLoading()}))}));function bt(t){var e=t.type,r=t.card;"liked"===e&&function(t){ot.deleteLikeCard(t._id).then((function(e){t.changeLikesCounter(e.likes),t.removeLike()})).catch((function(t){console.log(t)}))}(r),"disLiked"===e&&function(t){ot.likeCard(t._id).then((function(e){t.changeLikesCounter(e.likes),t.addLike()})).catch((function(t){console.log(t)}))}(r)}var ht=function(t,e){yt.open(t,e)},_t=function(){var t=new f(nt,$),e=new f(nt,tt),r=new f(nt,et);return t.enableValidation(),e.enableValidation(),r.enableValidation(),{validatorFormAdd:t,validatorFormEdit:e,validatorFormAvatar:r}}(),mt=_t.validatorFormAdd,vt=_t.validatorFormEdit,gt=_t.validatorFormAvatar,kt=function(t,e){pt.open(t,e)};function St(t){return new i(t,".gallery__array",kt,bt).generateCard()}rt.addEventListener("click",(function(){dt.open(),gt.toggleButtonState()})),Y.addEventListener("click",(function(){st.open();var t=lt.getUserInfo(),e=t.name,r=t.job;W.value=e,X.value=r,vt.toggleButtonState()})),Z.addEventListener("click",(function(){ft.open(),mt.toggleButtonState()}))})();