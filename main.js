/*! For license information please see main.js.LICENSE.txt */
(()=>{"use strict";var t={d:(e,r)=>{for(var n in r)t.o(r,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:r[n]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),p:""};function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}function r(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,o(n.key),n)}}function n(t,e,r){return(e=o(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function o(t){var r=function(t,r){if("object"!==e(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!==e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===e(r)?r:String(r)}t.d({},{h:()=>at,l:()=>_t});var i=function(){function t(e,r,o){var i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),n(this,"_deleteImage",(function(){i._galleryCard.remove(),i._galleryCard=null})),n(this,"_toggleLike",(function(){i._isLike?(at.deleteLikeCard(i._id),i._galleryLikesCounter.textContent=Number(i._galleryLikesCounter.textContent)-1):(at.likeCard(i._id),i._galleryLikesCounter.textContent=Number(i._galleryLikesCounter.textContent)+1),i._galleryLike.classList.toggle("gallery__like_active")})),this._name=e.name,this._link=e.link,this._id=e.id,this._likes=e.likes,this._owner=e.owner,this._isLike=e.isLiked,this._isOwner=e.isOwner,this._galleryCard=document.querySelector(r).content.querySelector(".gallery__card"),this._handleCardClick=o}var e,o;return e=t,(o=[{key:"generateCard",value:function(){var t;return this._galleryCard=this._getCardTemplate(this._galleryCard),this._galleryImg=this._galleryCard.querySelector(".gallery__pic"),this._galleryLikesCounter=this._galleryCard.querySelector(".gallery__like-counter"),this._galleryImg.setAttribute("alt",this._name),this._galleryImg.setAttribute("src",this._link),this._galleryLikesCounter.textContent=null===(t=this._likes)||void 0===t?void 0:t.length,this._galleryName=this._galleryCard.querySelector(".gallery__text"),this._galleryName.textContent=this._name,this._galleryDelete=this._galleryCard.querySelector(".gallery__delete"),this._isOwner&&this._galleryDelete.classList.remove("gallery__delete_disable"),this._galleryLike=this._galleryCard.querySelector(".gallery__like"),this._isLike&&this._galleryLike.classList.add("gallery__like_active"),this._addEventListeners(),this._galleryCard}},{key:"_getCardTemplate",value:function(t){return t.cloneNode(!0)}},{key:"_addEventListeners",value:function(){var t=this;this._galleryImg.addEventListener("click",(function(){t._handleCardClick(t._name,t._link)})),this._galleryDelete.addEventListener("click",(function(){return _t(t._galleryCard,{id:t._id,owner:t._owner})})),this._galleryLike.addEventListener("click",this._toggleLike)}}])&&r(e.prototype,o),Object.defineProperty(e,"prototype",{writable:!1}),t}();function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,s(n.key),n)}}function c(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function l(t,e,r){return(e=s(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function s(t){var e=function(t,e){if("object"!==u(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===u(e)?e:String(e)}var f=c((function t(e,r){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),l(this,"_hasInvalidInput",(function(){return Array.from(n._inputList).some((function(t){return!t.validity.valid}))})),l(this,"toggleButtonState",(function(){n._hasInvalidInput()?(n._buttonElement.classList.add(n._obj.popupButtonBlocked),n._buttonElement.setAttribute("disabled",!0)):(n._buttonElement.classList.remove(n._obj.popupButtonBlocked),n._buttonElement.removeAttribute("disabled"))})),l(this,"_setEventListener",(function(){n._inputList=Array.from(n._formElement.querySelectorAll(n._obj.popupInputValidate)),n._buttonElement=n._formElement.querySelector(n._obj.popupButtonValidate),n.toggleButtonState(),n._inputList.forEach((function(t){t.addEventListener("input",(function(){n._checkInputValidity(t),n.toggleButtonState()}))}))})),l(this,"_showInputError",(function(t,e){t.classList.add(n._obj.popupInputError),n._errorElement.textContent=e,n._errorElement.classList.add(n._obj.popupError)})),l(this,"_hideInputError",(function(t){t.classList.remove(n._obj.popupInputError),n._errorElement.classList.remove(n._obj.popupError),n._errorElement.textContent=""})),l(this,"_checkInputValidity",(function(t){n._errorElement=n._formElement.querySelector(".".concat(t.id,"-error")),t.validity.valid?n._hideInputError(t):n._showInputError(t,t.validationMessage)})),l(this,"enableValidation",(function(){n._setEventListener()})),this._obj=e,this._formElement=r}));function p(t){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p(t)}function y(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==p(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===p(o)?o:String(o)),n)}var o}var h=function(){function t(e,r){var n=e.items,o=e.renderer;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._initialArray=n,this._renderer=o,this._container=document.querySelector(r),this._selector=r}var e,r;return e=t,(r=[{key:"addItem",value:function(t){this._container.prepend(t)}},{key:"getItems",value:function(){return this._initialArray}},{key:"setItems",value:function(e){return new t({items:e,renderer:this._renderer},this._selector)}},{key:"renderItems",value:function(){var t=this;this._initialArray.slice(0).reverse().forEach((function(e){t._renderer(e)}))}}])&&y(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function d(t){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d(t)}function v(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,m(n.key),n)}}function m(t){var e=function(t,e){if("object"!==d(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==d(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===d(e)?e:String(e)}var b=function(){function t(e){var r,n,o,i=this,u=e.profileNameSelector,a=e.profileJobSelector,c=e.profileAvatarSelector;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=function(){return at.getUserInfo().then((function(t){return i._profileName=t.name,i._profileJob=t.about,i._profileAvatar=t.avatar,t})).catch((function(t){throw new Error("Ошибка получения данных пользователя")}))},(n=m(n="fetchUserData"))in r?Object.defineProperty(r,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[n]=o,this._profileNameSelector=document.querySelector(u),this._profileJobSelector=document.querySelector(a),this._profileAvatarSelector=document.querySelector(c)}var e,r;return e=t,(r=[{key:"getUserInfo",value:function(){return{profileName:this._profileName,profileJob:this._profileJob}}},{key:"setUserInfo",value:function(){this._profileNameSelector.textContent=this._profileName,this._profileJobSelector.textContent=this._profileJob,this._profileAvatarSelector.setAttribute("src",this._profileAvatar)}},{key:"setUserInfoForm",value:function(t){var e=t.name,r=t.job;this._profileName=e,this._profileJob=r,this._profileNameSelector.textContent=this._profileName,this._profileJobSelector.textContent=this._profileJob}}])&&v(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function _(t){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_(t)}function g(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==_(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===_(o)?o:String(o)),n)}var o}var w=function(){function t(e){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._popupType=document.querySelector(e),this._closeBtn=this._popupType.querySelector(".popup__close"),this._processClickUpd=function(t){r._processClick(t)},this._processEscapeUpd=function(t){r._processEscape(t)},this._processCloseUpd=function(){r.close()}}var e,r;return e=t,(r=[{key:"open",value:function(){this._popupType.classList.add("popup_opened"),this.setEventListeners()}},{key:"close",value:function(){this._popupType.classList.remove("popup_opened"),document.removeEventListener("keydown",this._processEscapeUpd),this._popupType.removeEventListener("click",this._processClickUpd),this._closeBtn.removeEventListener("click",this._processCloseUpd)}},{key:"getPopupType",value:function(){return this._popupType}},{key:"setEventListeners",value:function(){document.addEventListener("keydown",this._processEscapeUpd),this._popupType.addEventListener("click",this._processClickUpd),this._closeBtn.addEventListener("click",this._processCloseUpd)}},{key:"_processEscape",value:function(t){"Escape"===t.key&&this.close()}},{key:"_processClick",value:function(t){t.target===t.currentTarget&&this.close()}}])&&g(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function k(t){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},k(t)}function S(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,C(n.key),n)}}function E(t,e){return E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},E(t,e)}function j(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function O(){return O="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=P(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},O.apply(this,arguments)}function P(t){return P=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},P(t)}function L(t,e,r){return(e=C(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function C(t){var e=function(t,e){if("object"!==k(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==k(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===k(e)?e:String(e)}var T=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&E(t,e)}(u,t);var e,r,n,o,i=(n=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=P(n);if(o){var r=P(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===k(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return j(t)}(this,t)});function u(t,e){var r,n,o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),L(j(o=i.call(this,t)),"setEventListeners",(function(){O((r=j(o),P(u.prototype)),"setEventListeners",r).call(r),o._form.addEventListener("submit",o._processSubmit)})),L(j(o),"close",(function(){O((n=j(o),P(u.prototype)),"close",n).call(n),o._form.removeEventListener("submit",o._processSubmit),o._form.reset()})),o._form=o._popupType.querySelector(".popup__form"),o._inputList=Array.from(o._form.querySelectorAll(".popup__input")),o._submitButton=o._form.querySelector(".popup__button"),o._submitButtonText=o._submitButton.textContent,o._processSubmit=function(t){t.preventDefault(),e(o._getInputValues()),o.close()},o}return e=u,(r=[{key:"_getInputValues",value:function(){var t=this;return this._formValues={},this._inputList.forEach((function(e){t._formValues[e.name]=e.value})),this._formValues}},{key:"isLoading",value:function(t){this._submitButton.textContent=t||this._submitButtonText}}])&&S(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),u}(w);function x(t){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},x(t)}function I(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==x(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==x(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===x(o)?o:String(o)),n)}var o}function A(){return A="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=U(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},A.apply(this,arguments)}function N(t,e){return N=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},N(t,e)}function U(t){return U=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},U(t)}var q=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&N(t,e)}(u,t);var e,r,n,o,i=(n=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=U(n);if(o){var r=U(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===x(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(e=i.call(this,t))._popupImg=e._popupType.querySelector(".popup__img"),e._popupText=e._popupType.querySelector(".popup__text"),e}return e=u,(r=[{key:"open",value:function(t,e){this._popupImg.setAttribute("alt",t),this._popupImg.setAttribute("src",e),this._popupText.textContent=t,A(U(u.prototype),"open",this).call(this)}}])&&I(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),u}(w);function B(t){return B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},B(t)}function R(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==B(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==B(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===B(o)?o:String(o)),n)}var o}function D(){return D="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=V(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},D.apply(this,arguments)}function J(t,e){return J=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},J(t,e)}function V(t){return V=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},V(t)}var F=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&J(t,e)}(u,t);var e,r,n,o,i=(n=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=V(n);if(o){var r=V(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===B(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(r=i.call(this,t,e))._processSubmit=function(t){t.preventDefault(),e(r._card,r._cardData),r.close()},r}return e=u,(r=[{key:"open",value:function(t,e){this._card=t,this._cardData=e,D(V(u.prototype),"open",this).call(this)}},{key:"close",value:function(){D(V(u.prototype),"close",this).call(this),this._card=null}}])&&R(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),u}(T);function z(t){return z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},z(t)}function G(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==z(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==z(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===z(o)?o:String(o)),n)}var o}var H=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._baseUrl=e.baseUrl,this._token=e.headers.authorization,this._contentType=e.headers["Content-Type"]}var e,r;return e=t,r=[{key:"_getCheck",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return t.ok?t.json():Promise.reject(">>>> Ошибка - ".concat(e,": ").concat(t.status))}},{key:"getUserInfo",value:function(){var t=this;return fetch(this._baseUrl+"/users/me",{method:"GET",headers:{authorization:this._token}}).then((function(e){return t._getCheck(e,"информация о пользователе")}))}},{key:"getInitialCards",value:function(){var t=this;return fetch(this._baseUrl+"/cards",{method:"GET",headers:{authorization:this._token}}).then((function(e){return t._getCheck(e,"массив картинок")}))}},{key:"editProfile",value:function(t){var e=this,r=t.name,n=t.about;return fetch(this._baseUrl+"/users/me",{method:"PATCH",headers:{authorization:this._token,"Content-Type":this._contentType},body:JSON.stringify({name:r,about:n})}).then((function(t){return e._getCheck(t,"изменить профиль")}))}},{key:"editAvatar",value:function(t){var e=this,r=t.avatar;return fetch(this._baseUrl+"/users/me/avatar",{method:"PATCH",headers:{authorization:this._token,"Content-Type":this._contentType},body:JSON.stringify({avatar:r})}).then((function(t){return e._getCheck(t,"изменеть аватар")}))}},{key:"addNewCard",value:function(t){var e=this,r=t.name,n=t.link;return fetch(this._baseUrl+"/cards",{method:"POST",headers:{authorization:this._token,"Content-Type":this._contentType},body:JSON.stringify({name:r,link:n})}).then((function(t){return e._getCheck(t,"добавить изображение")}))}},{key:"deleteCard",value:function(t){var e=this;return fetch(this._baseUrl+"/cards/"+t,{method:"DELETE",headers:{authorization:this._token}}).then((function(t){return e._getCheck(t,"удалить изображение")}))}},{key:"likeCard",value:function(t){var e=this;return fetch(this._baseUrl+"/cards/"+t+"/likes",{method:"PUT",headers:{authorization:this._token}}).then((function(t){return e._getCheck(t,"поставить лайк")}))}},{key:"deleteLikeCard",value:function(t){var e=this;return fetch(this._baseUrl+"/cards/"+t+"/likes",{method:"DELETE",headers:{authorization:this._token}}).then((function(t){return e._getCheck(t,"снять лайк")}))}}],r&&G(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();const Y=t.p+"320dfc5ade8cc5428845.png",M=t.p+"1317f38edcb386d59936.png";function K(t){return K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},K(t)}function Q(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function W(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==K(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==K(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===K(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function X(){X=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",u=o.asyncIterator||"@@asyncIterator",a=o.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function l(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,u=Object.create(i.prototype),a=new j(o||[]);return n(u,"_invoke",{value:w(t,r,a)}),u}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var f={};function p(){}function y(){}function h(){}var d={};c(d,i,(function(){return this}));var v=Object.getPrototypeOf,m=v&&v(v(O([])));m&&m!==e&&r.call(m,i)&&(d=m);var b=h.prototype=p.prototype=Object.create(d);function _(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function g(t,e){function o(n,i,u,a){var c=s(t[n],t,i);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==K(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,u,a)}),(function(t){o("throw",t,u,a)})):e.resolve(f).then((function(t){l.value=t,u(l)}),(function(t){return o("throw",t,u,a)}))}a(c.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function w(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var u=r.delegate;if(u){var a=k(u,r);if(a){if(a===f)continue;return a}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=s(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function k(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,k(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function O(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:P}}function P(){return{value:void 0,done:!0}}return y.prototype=h,n(b,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:y,configurable:!0}),y.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},_(g.prototype),c(g.prototype,u,(function(){return this})),t.AsyncIterator=g,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var u=new g(l(e,r,n,o),i);return t.isGeneratorFunction(r)?u:u.next().then((function(t){return t.done?t.value:u.next()}))},_(b),c(b,a,"Generator"),c(b,i,(function(){return this})),c(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=O,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return u.type="throw",u.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],u=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var a=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(a&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var u=i?i.completion:{};return u.type=t,u.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(u)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),E(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;E(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:O(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function Z(t,e,r,n,o,i,u){try{var a=t[i](u),c=a.value}catch(t){return void r(t)}a.done?e(c):Promise.resolve(c).then(n,o)}function $(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function u(t){Z(i,n,o,u,a,"next",t)}function a(t){Z(i,n,o,u,a,"throw",t)}u(void 0)}))}}var tt=document.querySelector(".popup__input_click_name"),et=document.querySelector(".popup__input_click_job"),rt=document.querySelector(".profile__edit-button"),nt=(document.querySelector(".popup__input_card_name"),document.querySelector(".popup__input_card_link"),document.querySelector(".profile__add-button")),ot=document.querySelector(".popup__form_add"),it=document.querySelector(".popup__form_edit"),ut={popupInputValidate:".popup__input",popupButtonValidate:".popup__button",popupInputError:"popup__input_click_error",popupButtonBlocked:"popup__button_blocked",popupError:"popup__error_visible"},at=new H({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-61",headers:{authorization:"96420521-2cf3-4ce8-a5f9-6a7817778898","Content-Type":"application/json"}});document.getElementsByClassName("header__logo")[0].setAttribute("src",M),document.getElementsByClassName("profile__avatar")[0].setAttribute("src",Y);var ct,lt,st=new b({profileNameSelector:".profile__name",profileJobSelector:".profile__job",profileAvatarSelector:".profile__avatar"});st.fetchUserData().then((function(t){st.setUserInfo(),ct=t})).catch((function(t){console.log(t)}));var ft=function(t,e){(lt=new h({items:t.map((function(t){return{name:t.name,link:t.link,id:t._id,likes:t.likes,owner:t.owner,isLiked:!!t.likes.find((function(t){return t._id===e._id})),isOwner:t.owner._id===e._id}})),renderer:function(t){var e=Et(t);lt.addItem(e)}},".gallery")).renderItems()},pt=function(){var t=$(X().mark((function t(){var e;return X().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,st.fetchUserData();case 2:e=t.sent,at.getInitialCards().then(function(){var t=$(X().mark((function t(r){return X().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:ft(r,e);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){console.log(t)}));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();pt();var yt=function(){var t=$(X().mark((function t(e,r){return X().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log(e,r),r.owner._id===ct._id&&(at.deleteCard(r.id),e.remove());case 2:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),ht=new T(".popup_click_prof",(function(t){ht.isLoading("Сохранение..."),at.editProfile({name:t[tt.name],about:t[et.name]}).finally((function(){ht.isLoading()})),st.setUserInfoForm({name:t[tt.name],job:t[et.name]})})),dt=new T(".popup_click_card",(function(t){dt.isLoading("Сохранение..."),at.addNewCard({name:t.name,link:t["img-link"]}).then((function(t){var e;null===(e=lt)||void 0===e||e.addItem(Et(function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Q(Object(r),!0).forEach((function(e){W(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Q(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({id:t._id},t))),pt()})).catch((function(t){console.log(t)})).finally((function(){dt.isLoading()}))})),vt=new q(".popup_click_img"),mt=new F(".popup_click_delete",yt),bt=new T(".popup_click_avatar",(function(t){bt.isLoading("Сохранение..."),at.editAvatar({avatar:t["avatar-link"]}).then((function(){document.querySelector(".profile__avatar").setAttribute("src",t["avatar-link"])})).catch((function(t){console.log(t)})).finally((function(){bt.isLoading()}))})),_t=function(t,e){mt.open(t,e)},gt=function(){var t=new f(ut,ot),e=new f(ut,it);return t.enableValidation(),e.enableValidation(),{validatorFormAdd:t,validatorFormEdit:e}}(),wt=gt.validatorFormAdd,kt=gt.validatorFormEdit,St=function(t,e){vt.open(t,e)};function Et(t){return new i(t,".gallery__array",St).generateCard()}document.querySelector(".avatar__container").addEventListener("click",(function(){bt.open()})),rt.addEventListener("click",(function(){ht.open();var t=st.getUserInfo(),e=t.profileName,r=t.profileJob;tt.value=e,et.value=r,kt.toggleButtonState()})),nt.addEventListener("click",(function(){dt.open(),wt.toggleButtonState()}))})();